{% extends "layout.html" %}

{% from "macros/blog.html" import render_blog_post %}

{% block title %}{{ this.title }}{% endblock %}

{% block json_ld %}
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ this.title }}",
      "url": "{{ this|url(external=true) }}",
      "datePublished": "{{ this.pub_date }}",
      "image": {
        "@type": "ImageObject",
        {% if this.share_image %}
          "url": "{{ this.share_image|url(external=True) }}",
        {% else %}
          "url": "{{ config.PROJECT.logo|url(external=True) }}",
        {% endif %}
      },
      "author": {
        "@type": "Person",
        "name": "{{ config.PROJECT.author }}",
        "url": "{{ '/me'|url(external=True) }}"
      }
    }
  </script>
{% endblock %}

{% block content %}
  {{ render_blog_post(this) }}

  <div class="license">{{ render_cc_license('by-sa') }}</div>

  <div class="comments">{{ render_disqus_comments() }}</div>
{% endblock %}
